!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).milestones=t()}(this,function(){"use strict";var r="http://www.w3.org/1999/xhtml",i={svg:"http://www.w3.org/2000/svg",xhtml:r,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function a(e){var t=e+="",n=t.indexOf(":");return 0<=n&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),i.hasOwnProperty(t)?{space:i[t],local:e}:e}function o(e){e=a(e);return(e.local?function(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}:function(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===r&&e.documentElement.namespaceURI===r?e.createElement(n):e.createElementNS(t,n)}})(e)}function t(){}function s(e){return null==e?t:function(){return this.querySelector(e)}}function d(){return[]}function e(e){return new Array(e.length)}function b(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}b.prototype={constructor:b,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var g="$";function _(e,t,n,r,i,a){for(var o,u=0,c=t.length,f=a.length;u<f;++u)(o=t[u])?(o.__data__=a[u],r[u]=o):n[u]=new b(e,a[u]);for(;u<c;++u)(o=t[u])&&(i[u]=o)}function M(e,t,n,r,i,a,o){for(var u,c,f={},l=t.length,s=a.length,d=new Array(l),h=0;h<l;++h)(u=t[h])&&(d[h]=c=g+o.call(u,u.__data__,h,t),c in f?i[h]=u:f[c]=u);for(h=0;h<s;++h)(u=f[c=g+o.call(e,a[h],h,a)])?((r[h]=u).__data__=a[h],f[c]=null):n[h]=new b(e,a[h]);for(h=0;h<l;++h)(u=t[h])&&f[d[h]]===u&&(i[h]=u)}function h(e,t){return e<t?-1:t<e?1:t<=e?0:NaN}function u(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function c(e){return e.trim().split(/^|\s+/)}function f(e){return e.classList||new n(e)}function n(e){this._node=e,this._names=c(e.getAttribute("class")||"")}function l(e,t){for(var n=f(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function p(e,t){for(var n=f(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function m(){this.textContent=""}function y(){this.innerHTML=""}function v(){this.nextSibling&&this.parentNode.appendChild(this)}function w(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function x(){return null}function T(){var e=this.parentNode;e&&e.removeChild(this)}function D(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function A(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}n.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){e=this._names.indexOf(e);0<=e&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return 0<=this._names.indexOf(e)}};var C={};function N(n,e,t){return n=k(n,e,t),function(e){var t=e.relatedTarget;t&&(t===this||8&t.compareDocumentPosition(this))||n.call(this,e)}}function k(t,n,r){return function(e){t.call(this,this.__data__,n,r)}}function U(a){return function(){var e=this.__on;if(e){for(var t,n=0,r=-1,i=e.length;n<i;++n)t=e[n],a.type&&t.type!==a.type||t.name!==a.name?e[++r]=t:this.removeEventListener(t.type,t.listener,t.capture);++r?e.length=r:delete this.__on}}}function S(c,f,l){var s=C.hasOwnProperty(c.type)?N:k;return function(e,t,n){var r,i=this.__on,a=s(f,t,n);if(i)for(var o=0,u=i.length;o<u;++o)if((r=i[o]).type===c.type&&r.name===c.name)return this.removeEventListener(r.type,r.listener,r.capture),this.addEventListener(r.type,r.listener=a,r.capture=l),void(r.value=f);this.addEventListener(c.type,a,l),r={type:c.type,name:c.name,value:f,listener:a,capture:l},i?i.push(r):this.__on=[r]}}function Y(e,t,n){var r=u(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(C={mouseenter:"mouseover",mouseleave:"mouseout"}));var F=[null];function H(e,t){this._groups=e,this._parents=t}function z(e){return"string"==typeof e?new H([[document.querySelector(e)]],[document.documentElement]):new H([[e]],F)}function E(e){return"string"==typeof e?new H([document.querySelectorAll(e)],[document.documentElement]):new H([null==e?[]:e],F)}function I(e,t){return e<t?-1:t<e?1:t<=e?0:NaN}function L(a){var n;return 1===a.length&&(n=a,a=function(e,t){return I(n(e),t)}),{left:function(e,t,n,r){for(null==n&&(n=0),null==r&&(r=e.length);n<r;){var i=n+r>>>1;a(e[i],t)<0?n=1+i:r=i}return n},right:function(e,t,n,r){for(null==n&&(n=0),null==r&&(r=e.length);n<r;){var i=n+r>>>1;0<a(e[i],t)?r=i:n=1+i}return n}}}H.prototype={constructor:H,select:function(e){"function"!=typeof e&&(e=s(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,o,u=t[i],c=u.length,f=r[i]=new Array(c),l=0;l<c;++l)(a=u[l])&&(o=e.call(a,a.__data__,l,u))&&("__data__"in a&&(o.__data__=a.__data__),f[l]=o);return new H(r,this._parents)},selectAll:function(e){var t;"function"!=typeof e&&(e=null==(t=e)?d:function(){return this.querySelectorAll(t)});for(var n=this._groups,r=n.length,i=[],a=[],o=0;o<r;++o)for(var u,c=n[o],f=c.length,l=0;l<f;++l)(u=c[l])&&(i.push(e.call(u,u.__data__,l,c)),a.push(u));return new H(i,a)},filter:function(e){var t;"function"!=typeof e&&(t=e,e=function(){return this.matches(t)});for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a)for(var o,u=n[a],c=u.length,f=i[a]=[],l=0;l<c;++l)(o=u[l])&&e.call(o,o.__data__,l,u)&&f.push(o);return new H(i,this._parents)},data:function(e,t){if(!e)return b=new Array(this.size()),l=-1,this.each(function(e){b[++l]=e}),b;var n,r=t?M:_,i=this._parents,a=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var o=a.length,u=new Array(o),c=new Array(o),f=new Array(o),l=0;l<o;++l){var s=i[l],d=a[l],h=d.length,b=e.call(s,s&&s.__data__,l,i),g=b.length,p=c[l]=new Array(g),m=u[l]=new Array(g);r(s,d,p,m,f[l]=new Array(h),b,t);for(var y,v,w=0,x=0;w<g;++w)if(y=p[w]){for(x<=w&&(x=w+1);!(v=m[x])&&++x<g;);y._next=v||null}}return(u=new H(u,i))._enter=c,u._exit=f,u},enter:function(){return new H(this._enter||this._groups.map(e),this._parents)},exit:function(){return new H(this._exit||this._groups.map(e),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,a=this.exit(),r="function"==typeof e?e(r):r.append(e+"");return null!=t&&(i=t(i)),null==n?a.remove():n(a),r&&i?r.merge(i).order():i},merge:function(e){for(var t=this._groups,n=e._groups,r=t.length,e=n.length,i=Math.min(r,e),a=new Array(r),o=0;o<i;++o)for(var u,c=t[o],f=n[o],l=c.length,s=a[o]=new Array(l),d=0;d<l;++d)(u=c[d]||f[d])&&(s[d]=u);for(;o<r;++o)a[o]=t[o];return new H(a,this._parents)},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],a=i.length-1,o=i[a];0<=--a;)(r=i[a])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(n){function e(e,t){return e&&t?n(e.__data__,t.__data__):!e-!t}n=n||h;for(var t=this._groups,r=t.length,i=new Array(r),a=0;a<r;++a){for(var o,u=t[a],c=u.length,f=i[a]=new Array(c),l=0;l<c;++l)(o=u[l])&&(f[l]=o);f.sort(e)}return new H(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=new Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},size:function(){var e=0;return this.each(function(){++e}),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,a=t[n],o=0,u=a.length;o<u;++o)(i=a[o])&&e.call(i,i.__data__,o,a);return this},attr:function(e,t){var n=a(e);if(arguments.length<2){e=this.node();return n.local?e.getAttributeNS(n.space,n.local):e.getAttribute(n)}return this.each((null==t?n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}}:"function"==typeof t?n.local?function(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}:function(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}:n.local?function(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}:function(e,t){return function(){this.setAttribute(e,t)}})(n,t))},style:function(e,t,n){return 1<arguments.length?this.each((null==t?function(e){return function(){this.style.removeProperty(e)}}:"function"==typeof t?function(t,n,r){return function(){var e=n.apply(this,arguments);null==e?this.style.removeProperty(t):this.style.setProperty(t,e,r)}}:function(e,t,n){return function(){this.style.setProperty(e,t,n)}})(e,t,null==n?"":n)):(n=this.node(),e=e,n.style.getPropertyValue(e)||u(n).getComputedStyle(n,null).getPropertyValue(e))},property:function(e,t){return 1<arguments.length?this.each((null==t?function(e){return function(){delete this[e]}}:"function"==typeof t?function(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}:function(e,t){return function(){this[e]=t}})(e,t)):this.node()[e]},classed:function(e,t){var n=c(e+"");if(arguments.length<2){for(var r=f(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?function(e,t){return function(){(t.apply(this,arguments)?l:p)(this,e)}}:t?function(e){return function(){l(this,e)}}:function(e){return function(){p(this,e)}})(n,t))},text:function(e){return arguments.length?this.each(null==e?m:("function"==typeof e?function(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}:function(e){return function(){this.textContent=e}})(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?y:("function"==typeof e?function(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}:function(e){return function(){this.innerHTML=e}})(e)):this.node().innerHTML},raise:function(){return this.each(v)},lower:function(){return this.each(w)},append:function(e){var t="function"==typeof e?e:o(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:o(e),r=null==t?x:"function"==typeof t?t:s(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(T)},clone:function(e){return this.select(e?A:D)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,a=(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return 0<=n&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}),o=a.length;if(!(arguments.length<2)){for(u=t?S:U,null==n&&(n=!1),r=0;r<o;++r)this.each(u(a[r],t,n));return this}var u=this.node().__on;if(u)for(var c,f=0,l=u.length;f<l;++f)for(r=0,c=u[f];r<o;++r)if((i=a[r]).type===c.type&&i.name===c.name)return c.value},dispatch:function(e,t){return this.each(("function"==typeof t?function(e,t){return function(){return Y(this,e,t.apply(this,arguments))}}:function(e,t){return function(){return Y(this,e,t)}})(e,t))}};var q=L(I).right;var j=Math.sqrt(50),O=Math.sqrt(10),P=Math.sqrt(2);function R(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),n=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),r=r/n;return j<=r?n*=10:O<=r?n*=5:P<=r&&(n*=2),t<e?-n:n}function V(e,t){var n,r,i=e.length,a=-1;if(null==t){for(;++a<i;)if(null!=(n=e[a])&&n<=n)for(r=n;++a<i;)null!=(n=e[a])&&r<n&&(r=n)}else for(;++a<i;)if(null!=(n=t(e[a],a,e))&&n<=n)for(r=n;++a<i;)null!=(n=t(e[a],a,e))&&r<n&&(r=n);return r}var B="$";function Q(){}function W(e,t){var n=new Q;if(e instanceof Q)e.each(function(e,t){n.set(t,e)});else if(Array.isArray(e)){var r,i=-1,a=e.length;if(null==t)for(;++i<a;)n.set(i,e[i]);else for(;++i<a;)n.set(t(r=e[i],i,e),r)}else if(e)for(var o in e)n.set(o,e[o]);return n}function Z(){var d,h,t,b=[],o=[];function g(e,n,r,i){if(n>=b.length)return null!=d&&e.sort(d),null!=h?h(e):e;for(var t,a,o,u=-1,c=e.length,f=b[n++],l=W(),s=r();++u<c;)(o=l.get(t=f(a=e[u])+""))?o.push(a):l.set(t,[a]);return l.each(function(e,t){i(s,t,g(e,n,r,i))}),s}return t={object:function(e){return g(e,0,$,X)},map:function(e){return g(e,0,J,G)},entries:function(e){return function n(e,r){if(++r>b.length)return e;var i,a=o[r-1];return null!=h&&r>=b.length?i=e.entries():(i=[],e.each(function(e,t){i.push({key:t,values:n(e,r)})})),null!=a?i.sort(function(e,t){return a(e.key,t.key)}):i}(g(e,0,J,G),0)},key:function(e){return b.push(e),t},sortKeys:function(e){return o[b.length-1]=e,t},sortValues:function(e){return d=e,t},rollup:function(e){return h=e,t}}}function $(){return{}}function X(e,t,n){e[t]=n}function J(){return W()}function G(e,t,n){e.set(t,n)}Q.prototype=W.prototype={constructor:Q,has:function(e){return B+e in this},get:function(e){return this[B+e]},set:function(e,t){return this[B+e]=t,this},remove:function(e){e=B+e;return e in this&&delete this[e]},clear:function(){for(var e in this)e[0]===B&&delete this[e]},keys:function(){var e,t=[];for(e in this)e[0]===B&&t.push(e.slice(1));return t},values:function(){var e,t=[];for(e in this)e[0]===B&&t.push(this[e]);return t},entries:function(){var e,t=[];for(e in this)e[0]===B&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var e,t=0;for(e in this)e[0]===B&&++t;return t},empty:function(){for(var e in this)if(e[0]===B)return!1;return!0},each:function(e){for(var t in this)t[0]===B&&e(this[t],t.slice(1),this)}};var K=Array.prototype,ee=K.map,te=K.slice;function ne(e,t,n){(e.prototype=t.prototype=n).constructor=e}function re(e,t){var n,r=Object.create(e.prototype);for(n in t)r[n]=t[n];return r}function ie(){}var ae=1/.7,oe="\\s*([+-]?\\d+)\\s*",ue="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",K="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ce=/^#([0-9a-f]{3,8})$/,fe=new RegExp("^rgb\\("+[oe,oe,oe]+"\\)$"),le=new RegExp("^rgb\\("+[K,K,K]+"\\)$"),se=new RegExp("^rgba\\("+[oe,oe,oe,ue]+"\\)$"),de=new RegExp("^rgba\\("+[K,K,K,ue]+"\\)$"),he=new RegExp("^hsl\\("+[ue,K,K]+"\\)$"),be=new RegExp("^hsla\\("+[ue,K,K,ue]+"\\)$"),ge={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function pe(){return this.rgb().formatHex()}function me(){return this.rgb().formatRgb()}function ye(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ce.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?ve(t):3===n?new Me(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?we(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?we(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=fe.exec(e))?new Me(t[1],t[2],t[3],1):(t=le.exec(e))?new Me(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=se.exec(e))?we(t[1],t[2],t[3],t[4]):(t=de.exec(e))?we(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=he.exec(e))?Ce(t[1],t[2]/100,t[3]/100,1):(t=be.exec(e))?Ce(t[1],t[2]/100,t[3]/100,t[4]):ge.hasOwnProperty(e)?ve(ge[e]):"transparent"===e?new Me(NaN,NaN,NaN,0):null}function ve(e){return new Me(e>>16&255,e>>8&255,255&e,1)}function we(e,t,n,r){return r<=0&&(e=t=n=NaN),new Me(e,t,n,r)}function xe(e){return e instanceof ie||(e=ye(e)),e?new Me((e=e.rgb()).r,e.g,e.b,e.opacity):new Me}function _e(e,t,n,r){return 1===arguments.length?xe(e):new Me(e,t,n,null==r?1:r)}function Me(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Te(){return"#"+Ae(this.r)+Ae(this.g)+Ae(this.b)}function De(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function Ae(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function Ce(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||1<=n?e=t=NaN:t<=0&&(e=NaN),new ke(e,t,n,r)}function Ne(e){if(e instanceof ke)return new ke(e.h,e.s,e.l,e.opacity);if(e instanceof ie||(e=ye(e)),!e)return new ke;if(e instanceof ke)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,u=a-i,c=(a+i)/2;return u?(o=t===a?(n-r)/u+6*(n<r):n===a?(r-t)/u+2:(t-n)/u+4,u/=c<.5?a+i:2-a-i,o*=60):u=0<c&&c<1?0:o,new ke(o,u,c,e.opacity)}function ke(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Ue(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}ne(ie,ye,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:pe,formatHex:pe,formatHsl:function(){return Ne(this).formatHsl()},formatRgb:me,toString:me}),ne(Me,_e,re(ie,{brighter:function(e){return e=null==e?ae:Math.pow(ae,e),new Me(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new Me(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Te,formatHex:Te,formatRgb:De,toString:De})),ne(ke,function(e,t,n,r){return 1===arguments.length?Ne(e):new ke(e,t,n,null==r?1:r)},re(ie,{brighter:function(e){return e=null==e?ae:Math.pow(ae,e),new ke(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new ke(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,t=n+(n<.5?n:1-n)*t,n=2*n-t;return new Me(Ue(240<=e?e-240:120+e,n,t),Ue(e,n,t),Ue(e<120?240+e:e-120,n,t),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var Se=Math.PI/180,Ye=180/Math.PI,Fe=1.78277,He=-.29227,ze=-.90649,Ee=1.97294,Ie=Ee*ze,Le=Ee*Fe,qe=Fe*He- -.14861*ze;function je(e,t,n,r){return 1===arguments.length?function(e){if(e instanceof Oe)return new Oe(e.h,e.s,e.l,e.opacity);e instanceof Me||(e=xe(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(qe*r+Ie*t-Le*n)/(qe+Ie-Le),r=(Ee*(n-i)-He*(t=r-i))/ze,n=Math.sqrt(r*r+t*t)/(Ee*i*(1-i));return new Oe((t=n?Math.atan2(r,t)*Ye-120:NaN)<0?t+360:t,n,i,e.opacity)}(e):new Oe(e,t,n,null==r?1:r)}function Oe(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Pe(e){return function(){return e}}function Re(t,n){return function(e){return t+e*n}}function Ve(a){return 1==(a=+a)?Be:function(e,t){return t-e?(n=e,r=t,i=a,n=Math.pow(n,i),r=Math.pow(r,i)-n,i=1/i,function(e){return Math.pow(n+e*r,i)}):Pe(isNaN(e)?t:e);var n,r,i}}function Be(e,t){var n=t-e;return n?Re(e,n):Pe(isNaN(e)?t:e)}ne(Oe,je,re(ie,{brighter:function(e){return e=null==e?ae:Math.pow(ae,e),new Oe(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new Oe(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*Se,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),e=Math.sin(e);return new Me(255*(t+n*(-.14861*r+Fe*e)),255*(t+n*(He*r+ze*e)),255*(t+Ee*r*n),this.opacity)}}));var Qe=function e(t){var o=Ve(t);function n(t,e){var n=o((t=_e(t)).r,(e=_e(e)).r),r=o(t.g,e.g),i=o(t.b,e.b),a=Be(t.opacity,e.opacity);return function(e){return t.r=n(e),t.g=r(e),t.b=i(e),t.opacity=a(e),t+""}}return n.gamma=e,n}(1);function We(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}var Ze=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$e=new RegExp(Ze.source,"g");function Xe(e,t){var n,r=typeof t;return null==t||"boolean"==r?Pe(t):("number"==r?We:"string"==r?(n=ye(t))?(t=n,Qe):function(e,r){var t,n,i,a,o,u=Ze.lastIndex=$e.lastIndex=0,c=-1,f=[],l=[];for(e+="",r+="";(t=Ze.exec(e))&&(n=$e.exec(r));)(i=n.index)>u&&(i=r.slice(u,i),f[c]?f[c]+=i:f[++c]=i),(t=t[0])===(n=n[0])?f[c]?f[c]+=n:f[++c]=n:(f[++c]=null,l.push({i:c,x:We(t,n)})),u=$e.lastIndex;return u<r.length&&(i=r.slice(u),f[c]?f[c]+=i:f[++c]=i),f.length<2?l[0]?(o=l[0].x,function(e){return o(e)+""}):(a=r,function(){return a}):(r=l.length,function(e){for(var t,n=0;n<r;++n)f[(t=l[n]).i]=t.x(e);return f.join("")})}:t instanceof ye?Qe:t instanceof Date?function(t,n){var r=new Date;return t=+t,n=+n,function(e){return r.setTime(t*(1-e)+n*e),r}}:(n=t,!ArrayBuffer.isView(n)||n instanceof DataView?Array.isArray(t)?function(e,t){for(var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),o=0;o<r;++o)i[o]=Xe(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(e){for(o=0;o<r;++o)a[o]=i[o](e);return a}}:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?function(e,t){var n,r={},i={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=Xe(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}:We:function(t,n){n=n||[];var r,i=t?Math.min(n.length,t.length):0,a=n.slice();return function(e){for(r=0;r<i;++r)a[r]=t[r]*(1-e)+n[r]*e;return a}}))(e,t)}function Je(t,n){return t=+t,n=+n,function(e){return Math.round(t*(1-e)+n*e)}}function Ge(u){return function e(o){function t(t,e){var n=u((t=je(t)).h,(e=je(e)).h),r=Be(t.s,e.s),i=Be(t.l,e.l),a=Be(t.opacity,e.opacity);return function(e){return t.h=n(e),t.s=r(e),t.l=i(Math.pow(e,o)),t.opacity=a(e),t+""}}return o=+o,t.gamma=e,t}(1)}Ge(function(e,t){var n=t-e;return n?Re(e,180<n||n<-180?n-360*Math.round(n/360):n):Pe(isNaN(e)?t:e)});K=Ge(Be);function Ke(e){return+e}var et=[0,1];function tt(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:(e=n,function(){return e});var e}function nt(e,t,n,r){var i=e[0],e=e[1],a=t[0],t=t[1],a=e<i?(i=n(e,i),r(t,a)):(i=n(i,e),r(a,t));return function(e){return a(i(e))}}function rt(n,e,t,r){var i=Math.min(n.length,e.length)-1,a=new Array(i),o=new Array(i),u=-1;for(n[i]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++u<i;)a[u]=t(n[u],n[u+1]),o[u]=r(e[u],e[u+1]);return function(e){var t=q(n,e,1,i)-1;return o[t](a[t](e))}}function it(t,n){var r,a,o,u=et,c=et,f=Xe,l=!1;function i(){return r=2<Math.min(u.length,c.length)?rt:nt,a=o=null,e}function e(e){return(a=a||r(u,c,l?(i=t,function(t,n){var r=i(t=+t,n=+n);return function(e){return e<=t?0:n<=e?1:r(e)}}):t,f))(+e);var i}return e.invert=function(e){return(o=o||r(c,u,tt,l?(i=n,function(t,n){var r=i(t=+t,n=+n);return function(e){return e<=0?t:1<=e?n:r(e)}}):n))(+e);var i},e.domain=function(e){return arguments.length?(u=ee.call(e,Ke),i()):u.slice()},e.range=function(e){return arguments.length?(c=te.call(e),i()):c.slice()},e.rangeRound=function(e){return c=te.call(e),f=Je,i()},e.clamp=function(e){return arguments.length?(l=!!e,i()):l},e.interpolate=function(e){return arguments.length?(f=e,i()):f},i()}var at=new Date,ot=new Date;function ut(a,o,n,r){function u(e){return a(e=0===arguments.length?new Date:new Date(+e)),e}return u.floor=function(e){return a(e=new Date(+e)),e},u.ceil=function(e){return a(e=new Date(e-1)),o(e,1),a(e),e},u.round=function(e){var t=u(e),n=u.ceil(e);return e-t<n-e?t:n},u.offset=function(e,t){return o(e=new Date(+e),null==t?1:Math.floor(t)),e},u.range=function(e,t,n){var r,i=[];if(e=u.ceil(e),n=null==n?1:Math.floor(n),!(e<t&&0<n))return i;for(;i.push(r=new Date(+e)),o(e,n),a(e),r<e&&e<t;);return i},u.filter=function(n){return ut(function(e){if(e<=e)for(;a(e),!n(e);)e.setTime(e-1)},function(e,t){if(e<=e)if(t<0)for(;++t<=0;)for(;o(e,-1),!n(e););else for(;0<=--t;)for(;o(e,1),!n(e););})},n&&(u.count=function(e,t){return at.setTime(+e),ot.setTime(+t),a(at),a(ot),Math.floor(n(at,ot))},u.every=function(t){return t=Math.floor(t),isFinite(t)&&0<t?1<t?u.filter(r?function(e){return r(e)%t==0}:function(e){return u.count(0,e)%t==0}):u:null}),u}var ct=ut(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});ct.every=function(n){return n=Math.floor(n),isFinite(n)&&0<n?1<n?ut(function(e){e.setTime(Math.floor(e/n)*n)},function(e,t){e.setTime(+e+t*n)},function(e,t){return(t-e)/n}):ct:null};var ft=ut(function(e){e.setTime(e-e.getMilliseconds())},function(e,t){e.setTime(+e+1e3*t)},function(e,t){return(t-e)/1e3},function(e){return e.getUTCSeconds()}),lt=ut(function(e){e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds())},function(e,t){e.setTime(+e+6e4*t)},function(e,t){return(t-e)/6e4},function(e){return e.getMinutes()}),st=ut(function(e){e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds()-6e4*e.getMinutes())},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getHours()}),dt=ut(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5},function(e){return e.getDate()-1});function ht(t){return ut(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/6048e5})}var bt=ht(0),gt=ht(1),pt=(ht(2),ht(3),ht(4)),mt=(ht(5),ht(6),ut(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()})),yt=ut(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});yt.every=function(n){return isFinite(n=Math.floor(n))&&0<n?ut(function(e){e.setFullYear(Math.floor(e.getFullYear()/n)*n),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t*n)}):null};var vt=ut(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/864e5},function(e){return e.getUTCDate()-1});function wt(t){return ut(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/6048e5})}var xt=wt(0),_t=wt(1),Mt=(wt(2),wt(3),wt(4)),Tt=(wt(5),wt(6),ut(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()}));function Dt(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function At(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ct(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Nt(e){var r=e.dateTime,i=e.date,a=e.time,t=e.periods,n=e.days,o=e.shortDays,u=e.months,c=e.shortMonths,f=jt(t),l=Ot(t),s=jt(n),d=Ot(n),h=jt(o),b=Ot(o),g=jt(u),p=Ot(u),m=jt(c),y=Ot(c),v={a:function(e){return o[e.getDay()]},A:function(e){return n[e.getDay()]},b:function(e){return c[e.getMonth()]},B:function(e){return u[e.getMonth()]},c:null,d:fn,e:fn,f:bn,g:Dn,G:Cn,H:ln,I:sn,j:dn,L:hn,m:gn,M:pn,p:function(e){return t[+(12<=e.getHours())]},q:function(e){return 1+~~(e.getMonth()/3)},Q:Xn,s:Jn,S:mn,u:yn,U:vn,V:xn,w:_n,W:Mn,x:null,X:null,y:Tn,Y:An,Z:Nn,"%":$n},w={a:function(e){return o[e.getUTCDay()]},A:function(e){return n[e.getUTCDay()]},b:function(e){return c[e.getUTCMonth()]},B:function(e){return u[e.getUTCMonth()]},c:null,d:kn,e:kn,f:Hn,g:Bn,G:Wn,H:Un,I:Sn,j:Yn,L:Fn,m:zn,M:En,p:function(e){return t[+(12<=e.getUTCHours())]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:Xn,s:Jn,S:In,u:Ln,U:qn,V:On,w:Pn,W:Rn,x:null,X:null,y:Vn,Y:Qn,Z:Zn,"%":$n},x={a:function(e,t,n){t=h.exec(t.slice(n));return t?(e.w=b[t[0].toLowerCase()],n+t[0].length):-1},A:function(e,t,n){t=s.exec(t.slice(n));return t?(e.w=d[t[0].toLowerCase()],n+t[0].length):-1},b:function(e,t,n){t=m.exec(t.slice(n));return t?(e.m=y[t[0].toLowerCase()],n+t[0].length):-1},B:function(e,t,n){t=g.exec(t.slice(n));return t?(e.m=p[t[0].toLowerCase()],n+t[0].length):-1},c:function(e,t,n){return T(e,r,t,n)},d:Gt,e:Gt,f:an,g:Zt,G:Wt,H:en,I:en,j:Kt,L:rn,m:Jt,M:tn,p:function(e,t,n){t=f.exec(t.slice(n));return t?(e.p=l[t[0].toLowerCase()],n+t[0].length):-1},q:Xt,Q:un,s:cn,S:nn,u:Rt,U:Vt,V:Bt,w:Pt,W:Qt,x:function(e,t,n){return T(e,i,t,n)},X:function(e,t,n){return T(e,a,t,n)},y:Zt,Y:Wt,Z:$t,"%":on};function _(c,f){return function(e){var t,n,r,i=[],a=-1,o=0,u=c.length;for(e instanceof Date||(e=new Date(+e));++a<u;)37===c.charCodeAt(a)&&(i.push(c.slice(o,a)),null!=(n=Ht[t=c.charAt(++a)])?t=c.charAt(++a):n="e"===t?" ":"0",(r=f[t])&&(t=r(e,n)),i.push(t),o=a+1);return i.push(c.slice(o,a)),i.join("")}}function M(i,a){return function(e){var t,n,r=Ct(1900,void 0,1);if(T(r,i,e+="",0)!=e.length)return null;if("Q"in r)return new Date(r.Q);if("s"in r)return new Date(1e3*r.s+("L"in r?r.L:0));if(!a||"Z"in r||(r.Z=0),"p"in r&&(r.H=r.H%12+12*r.p),void 0===r.m&&(r.m="q"in r?r.q:0),"V"in r){if(r.V<1||53<r.V)return null;"w"in r||(r.w=1),"Z"in r?(t=4<(n=(t=At(Ct(r.y,0,1))).getUTCDay())||0===n?_t.ceil(t):_t(t),t=vt.offset(t,7*(r.V-1)),r.y=t.getUTCFullYear(),r.m=t.getUTCMonth(),r.d=t.getUTCDate()+(r.w+6)%7):(t=4<(n=(t=Dt(Ct(r.y,0,1))).getDay())||0===n?gt.ceil(t):gt(t),t=dt.offset(t,7*(r.V-1)),r.y=t.getFullYear(),r.m=t.getMonth(),r.d=t.getDate()+(r.w+6)%7)}else("W"in r||"U"in r)&&("w"in r||(r.w="u"in r?r.u%7:"W"in r?1:0),n="Z"in r?At(Ct(r.y,0,1)).getUTCDay():Dt(Ct(r.y,0,1)).getDay(),r.m=0,r.d="W"in r?(r.w+6)%7+7*r.W-(n+5)%7:r.w+7*r.U-(n+6)%7);return"Z"in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,At(r)):Dt(r)}}function T(e,t,n,r){for(var i,a,o=0,u=t.length,c=n.length;o<u;){if(c<=r)return-1;if(37===(i=t.charCodeAt(o++))){if(i=t.charAt(o++),!(a=x[i in Ht?t.charAt(o++):i])||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return v.x=_(i,v),v.X=_(a,v),v.c=_(r,v),w.x=_(i,w),w.X=_(a,w),w.c=_(r,w),{format:function(e){var t=_(e+="",v);return t.toString=function(){return e},t},parse:function(e){var t=M(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=_(e+="",w);return t.toString=function(){return e},t},utcParse:function(e){var t=M(e+="",!0);return t.toString=function(){return e},t}}}Tt.every=function(n){return isFinite(n=Math.floor(n))&&0<n?ut(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/n)*n),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t*n)}):null};var kt,Ut,St,Yt,Ft,Ht={"-":"",_:" ",0:"0"},zt=/^\s*\d+/,Et=/^%/,It=/[\\^$*+?|[\]().{}]/g;function Lt(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",e=i.length;return r+(e<n?new Array(n-e+1).join(t)+i:i)}function qt(e){return e.replace(It,"\\$&")}function jt(e){return new RegExp("^(?:"+e.map(qt).join("|")+")","i")}function Ot(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function Pt(e,t,n){t=zt.exec(t.slice(n,n+1));return t?(e.w=+t[0],n+t[0].length):-1}function Rt(e,t,n){t=zt.exec(t.slice(n,n+1));return t?(e.u=+t[0],n+t[0].length):-1}function Vt(e,t,n){t=zt.exec(t.slice(n,n+2));return t?(e.U=+t[0],n+t[0].length):-1}function Bt(e,t,n){t=zt.exec(t.slice(n,n+2));return t?(e.V=+t[0],n+t[0].length):-1}function Qt(e,t,n){t=zt.exec(t.slice(n,n+2));return t?(e.W=+t[0],n+t[0].length):-1}function Wt(e,t,n){t=zt.exec(t.slice(n,n+4));return t?(e.y=+t[0],n+t[0].length):-1}function Zt(e,t,n){t=zt.exec(t.slice(n,n+2));return t?(e.y=+t[0]+(68<+t[0]?1900:2e3),n+t[0].length):-1}function $t(e,t,n){t=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return t?(e.Z=t[1]?0:-(t[2]+(t[3]||"00")),n+t[0].length):-1}function Xt(e,t,n){t=zt.exec(t.slice(n,n+1));return t?(e.q=3*t[0]-3,n+t[0].length):-1}function Jt(e,t,n){t=zt.exec(t.slice(n,n+2));return t?(e.m=t[0]-1,n+t[0].length):-1}function Gt(e,t,n){t=zt.exec(t.slice(n,n+2));return t?(e.d=+t[0],n+t[0].length):-1}function Kt(e,t,n){t=zt.exec(t.slice(n,n+3));return t?(e.m=0,e.d=+t[0],n+t[0].length):-1}function en(e,t,n){t=zt.exec(t.slice(n,n+2));return t?(e.H=+t[0],n+t[0].length):-1}function tn(e,t,n){t=zt.exec(t.slice(n,n+2));return t?(e.M=+t[0],n+t[0].length):-1}function nn(e,t,n){t=zt.exec(t.slice(n,n+2));return t?(e.S=+t[0],n+t[0].length):-1}function rn(e,t,n){t=zt.exec(t.slice(n,n+3));return t?(e.L=+t[0],n+t[0].length):-1}function an(e,t,n){t=zt.exec(t.slice(n,n+6));return t?(e.L=Math.floor(t[0]/1e3),n+t[0].length):-1}function on(e,t,n){t=Et.exec(t.slice(n,n+1));return t?n+t[0].length:-1}function un(e,t,n){t=zt.exec(t.slice(n));return t?(e.Q=+t[0],n+t[0].length):-1}function cn(e,t,n){t=zt.exec(t.slice(n));return t?(e.s=+t[0],n+t[0].length):-1}function fn(e,t){return Lt(e.getDate(),t,2)}function ln(e,t){return Lt(e.getHours(),t,2)}function sn(e,t){return Lt(e.getHours()%12||12,t,2)}function dn(e,t){return Lt(1+dt.count(yt(e),e),t,3)}function hn(e,t){return Lt(e.getMilliseconds(),t,3)}function bn(e,t){return hn(e,t)+"000"}function gn(e,t){return Lt(e.getMonth()+1,t,2)}function pn(e,t){return Lt(e.getMinutes(),t,2)}function mn(e,t){return Lt(e.getSeconds(),t,2)}function yn(e){e=e.getDay();return 0===e?7:e}function vn(e,t){return Lt(bt.count(yt(e)-1,e),t,2)}function wn(e){var t=e.getDay();return 4<=t||0===t?pt(e):pt.ceil(e)}function xn(e,t){return e=wn(e),Lt(pt.count(yt(e),e)+(4===yt(e).getDay()),t,2)}function _n(e){return e.getDay()}function Mn(e,t){return Lt(gt.count(yt(e)-1,e),t,2)}function Tn(e,t){return Lt(e.getFullYear()%100,t,2)}function Dn(e,t){return Lt((e=wn(e)).getFullYear()%100,t,2)}function An(e,t){return Lt(e.getFullYear()%1e4,t,4)}function Cn(e,t){var n=e.getDay();return Lt((e=4<=n||0===n?pt(e):pt.ceil(e)).getFullYear()%1e4,t,4)}function Nn(e){e=e.getTimezoneOffset();return(0<e?"-":(e*=-1,"+"))+Lt(e/60|0,"0",2)+Lt(e%60,"0",2)}function kn(e,t){return Lt(e.getUTCDate(),t,2)}function Un(e,t){return Lt(e.getUTCHours(),t,2)}function Sn(e,t){return Lt(e.getUTCHours()%12||12,t,2)}function Yn(e,t){return Lt(1+vt.count(Tt(e),e),t,3)}function Fn(e,t){return Lt(e.getUTCMilliseconds(),t,3)}function Hn(e,t){return Fn(e,t)+"000"}function zn(e,t){return Lt(e.getUTCMonth()+1,t,2)}function En(e,t){return Lt(e.getUTCMinutes(),t,2)}function In(e,t){return Lt(e.getUTCSeconds(),t,2)}function Ln(e){e=e.getUTCDay();return 0===e?7:e}function qn(e,t){return Lt(xt.count(Tt(e)-1,e),t,2)}function jn(e){var t=e.getUTCDay();return 4<=t||0===t?Mt(e):Mt.ceil(e)}function On(e,t){return e=jn(e),Lt(Mt.count(Tt(e),e)+(4===Tt(e).getUTCDay()),t,2)}function Pn(e){return e.getUTCDay()}function Rn(e,t){return Lt(_t.count(Tt(e)-1,e),t,2)}function Vn(e,t){return Lt(e.getUTCFullYear()%100,t,2)}function Bn(e,t){return Lt((e=jn(e)).getUTCFullYear()%100,t,2)}function Qn(e,t){return Lt(e.getUTCFullYear()%1e4,t,4)}function Wn(e,t){var n=e.getUTCDay();return Lt((e=4<=n||0===n?Mt(e):Mt.ceil(e)).getUTCFullYear()%1e4,t,4)}function Zn(){return"+0000"}function $n(){return"%"}function Xn(e){return+e}function Jn(e){return Math.floor(+e/1e3)}kt=Nt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),Ut=kt.format,St=kt.parse,Yt=kt.utcFormat,Ft=kt.utcParse;ue="%Y-%m-%dT%H:%M:%S.%LZ";Date.prototype.toISOString||Yt(ue);var Gn=+new Date("2000-01-01T00:00:00.000Z")?function(e){return e=new Date(e),isNaN(e)?null:e}:Ft(ue),Kn=1e3,er=60*Kn,tr=60*er,nr=24*tr,rr=7*nr,ir=30*nr,ar=365*nr;function or(e){return new Date(e)}function ur(e){return e instanceof Date?+e:+new Date(+e)}function cr(o,t,n,r,i,a,u,c,f){var l=it(tt,We),s=l.invert,d=l.domain,h=f(".%L"),b=f(":%S"),g=f("%I:%M"),p=f("%I %p"),m=f("%a %d"),y=f("%b %d"),v=f("%B"),w=f("%Y"),x=[[u,1,Kn],[u,5,5*Kn],[u,15,15*Kn],[u,30,30*Kn],[a,1,er],[a,5,5*er],[a,15,15*er],[a,30,30*er],[i,1,tr],[i,3,3*tr],[i,6,6*tr],[i,12,12*tr],[r,1,nr],[r,2,2*nr],[n,1,rr],[t,1,ir],[t,3,3*ir],[o,1,ar]];function _(e){return(u(e)<e?h:a(e)<e?b:i(e)<e?g:r(e)<e?p:t(e)<e?n(e)<e?m:y:o(e)<e?v:w)(e)}function M(e,t,n,r){var i,a;return null==e&&(e=10),"number"==typeof e&&(i=Math.abs(n-t)/e,e=(a=L(function(e){return e[2]}).right(x,i))===x.length?(r=R(t/ar,n/ar,e),o):a?(r=(a=x[i/x[a-1][2]<x[a][2]/i?a-1:a])[1],a[0]):(r=Math.max(R(t,n,e),1),c)),null==r?e:e.every(r)}return l.invert=function(e){return new Date(s(e))},l.domain=function(e){return arguments.length?d(ee.call(e,ur)):d().map(or)},l.ticks=function(e,t){var n,r=d(),i=r[0],a=r[r.length-1],r=a<i;return r&&(n=i,i=a,a=n),n=(n=M(e,i,a,t))?n.range(i,a+1):[],r?n.reverse():n},l.tickFormat=function(e,t){return null==t?_:f(t)},l.nice=function(e,t){var n,r,i,a,o=d();return(e=M(e,o[0],o[o.length-1],t))?d((r=e,i=0,a=(n=(n=o).slice()).length-1,t=n[i],(e=n[a])<t&&(o=i,i=a,a=o,o=t,t=e,e=o),n[i]=r.floor(t),n[a]=r.ceil(e),n)):l},l.copy=function(){return e=l,cr(o,t,n,r,i,a,u,c,f).domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp());var e},l}function fr(e){return e.match(/.{6}/g).map(function(e){return"#"+e})}fr("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),fr("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),fr("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),fr("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),K(je(300,.5,0),je(-240,.5,1));K(je(-100,.75,.35),je(80,1.5,.8)),K(je(260,.75,.35),je(80,1.5,.8)),je();function lr(t){var n=t.length;return function(e){return t[Math.max(0,Math.min(n-1,Math.floor(e*n)))]}}lr(fr("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));lr(fr("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),lr(fr("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),lr(fr("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));var sr={second:"%Y-%m-%d %H:%M:%S",minute:"%Y-%m-%d %H:%M",hour:"%Y-%m-%d %H:00",day:"%Y-%m-%d",week:"%Y week %W",month:"%Y-%m",quarter:"%Y-Q%Q",year:"%Y"};function dr(i){return Object.keys(i).reduce(function(e,t){var n,r;return e[t]=(n=e,r=i[t],function(e){return r(e),n}),e},{})}var hr="milestones",br=hr+"__category_label",gr=hr+"__group",pr=gr+"__label",mr=pr+"-last",yr=pr+"-above",vr=pr+"__text",wr=vr+"__title",xr=vr+"__event",_r=xr+"--hover";function Mr(e,t){e%=2;return"top"===t?e=!0:"bottom"===t&&(e=!1),0<e}function Tr(e,t){return parseInt(e.style[t].replace("px",""),10)}function Dr(e,t,n,r,i){var a;return void 0!==(t=(n=n,e=e,t=t,"horizontal"===i?n[e+t]:n[e-t]))&&(a=t[0][r]+3),a}function Ar(e,t){return parseInt(e.style(t).replace("px",""),10)}function Cr(e){return e.select(function(){return this.parentNode})}function Nr(D,A,C,N,k,U,S,Y,F,H){for(var e=Z().key(function(e){return E(e).data()[0].timelineIndex}).entries(S._groups),z="top-bottom"===A?2:1,t=function(M){var T=0;return e.forEach(function(e){var _=e.values;_.forEach(function(e){var t=E(e).data()[0],a="horizontal"===U?_.length-t.index-1:t.index,o=E(_[a]).data()[0],u=H(D(o.key)),n=_[a][0],r="horizontal"===U?"offsetWidth":"offsetHeight",i="horizontal"===U?"width":"height",c="horizontal"===U?60:20,f=Tr(n,i),l=E(_[a]),s=Cr(l).classed(mr),d="horizontal"===U?"offsetHeight":"offsetWidth",h=Mr(a,A)?"horizontal"===U?"padding-bottom":"padding-right":"horizontal"===U?"padding-top":"padding-left";0===M&&(s=!1,l.style(h,"0px"),Cr(l).classed(mr,s));e=s?u-f<0:Y<u+f;if(n[r]>f||f<c||s||e){var b,g,p,m=null,y=0,v="horizontal"===U?z-1:1+z;do{"horizontal"===U?v++:v--,y++,0<v&&(g=(b=(b=(g=Dr(a,z,_,d,U))<=(p="horizontal"===U?Dr(a,-1*z,_,d,U):g)&&void 0!==g)||u<c)?g:p,p=b?z:-1*z,l.style(h,g+"px"),Cr(l).classed(mr,!b),m=function(e,t,n,r,i,a,o,u,c,f,l,s,d,h,b,g){void 0===g&&(g=!0);var p,m="horizontal"===s&&g?n+o:n-o;do{if("horizontal"===s&&g?m+=o:m-=o,void 0===(p=d._groups[m]))break}while(u>=p[0][l]);a=(void 0===r.category?i[a.timelineIndex]:i[a.timelineIndex].entries)[m];f=Tr(t,f);return f=void 0!==a?(a=b(e(a.key)),"horizontal"===s&g?a-c-6:"horizontal"===s&!g?a-6:c-a-6):"horizontal"===s&g?h-c-6:c-6,o<0?Math.min(c,f):f}(D,n,a,N,k,t,p,g,u,i,d,U,S,Y,H,b))}while(m<n[r]&&y<20);"horizontal"===U&&(m=Math.min(C,m)),l.style(F,m+"px");var w,x,e=Ar(l.select(".wrapper"),"width");e<m&&(m=e+6,l.style(F,m+"px")),0<M&&"horizontal"===U&&(e=Ar(l,"width"),w=s?u-e:u+e,x=Number.POSITIVE_INFINITY,_.forEach(function(e,t){var n,r,i=E(e).data()[0];i.key!==o.key&&0==(t+a%(r=z))%r&&(r=n=H(D(i.key))-5,i=E(_[t]),t=Cr(i).classed(mr),s&&!t&&(n=n+Ar(i,"width")+5),!s&&t&&(n=n-Ar(i,"width")-5),(s?w<n:r<w)&&(s?r<u:u<r)&&(e=e[0][d],Ar(l,h)<e&&(r=s?n-w:w-r,r=Ar(l,F)-r-6,c<r?(m=Math.min(m,r),l.style(F,m+"px")):l.style(h,e+5+"px"),T++)))}),0<x&&_.forEach(function(e,t){var n;0==(t+a%z)%z&&(n=E(_[t]),t=Ar(n,h),n.style(h,t-x+"px"))}))}})}),T},n=0,r=0;r=t(n),1===++n&&(r=1),n<20&&0<r;);}function kr(e){if("%Y-Q%Q"!==e)return Ut(e);var n=Ut(sr.month);return function(e){var t=n(e),e=t.split("-")[1],e=Math.ceil(parseInt(e)/3);return t.split("-")[0]+"-Q"+e}}function Ur(e){if("%Y-Q%Q"!==e)return St(e);var n=St(sr.month);return function(e){if(-1===e.search("-Q")){var t=3*Math.ceil(parseInt(e.split("-")[1])/3)-2+"",t=t.length<2?"0"+t:t;return n(e.split("-")[0]+"-"+t)}t=3*parseInt(e.split("-")[1][1])+"",t=t.length<2?"0"+t:t;return n(e.split("-")[0]+"-"+t)}}function Sr(t,e,n,r){function i(e){return t(r(e[n.timestamp]))}return void 0!==n.category&&void 0!==n.entries?e=e.map(function(e,t){return{category:e[n.category],entries:a(e[n.entries],t)}}):(void 0===e||Array.isArray(e[0])||(e=[e]),e.map(a));function a(e,n){return Z().key(i).sortKeys(I).entries(e).map(function(e,t){return e.index=t,e.timelineIndex=n,e})}}return function(d){var h,b,g,p,m,y,v="top-bottom",w=!1,x="horizontal",_=Gn,M={category:void 0,entries:void 0,timestamp:"timestamp",text:"text"};function t(e){h=kr(e)}function e(e){g=e}function T(e){return"function"==typeof p&&(z(this).classed(_r,!0),p(e)),e}function D(e){return"function"==typeof p&&(z(this).classed(_r,!1),m(e)),e}function A(e){return"function"==typeof y&&y(e),e}t("%Y-%m-%d %H:%M"),e(!0);var C=kr(sr.minute),N=Ur(sr.minute);function n(e){var t="horizontal"===x?"width":"height",n="horizontal"===x?"margin-left":"margin-top",r="horizontal"===x?"milestones__horizontal_line":"milestones__vertical_line",u="horizontal"===x?180:100,i=z(d).selectAll("."+hr),c=void 0!==e?Sr(C,e,M,_):i.data(),a=i.data(c),o=a.enter().append("div").attr("class",hr);a.exit().remove();e=parseFloat(z(d).style(t))-11;void 0!==M.category?(o.append("div").attr("class",br).text(function(e){return e.category}),o.append("div").attr("class","data-js-timeline").append("div").attr("class",r)):o.append("div").attr("class",r);var i=a.merge(o),f=[],a=i.selectAll("."+br);a.each(function(e,t,n){f.push(n[t].offsetWidth)});var o=Math.round(V(f)||0),l=e-o-10;a.style("width",o+"px"),"vertical"===x&&(a.style("margin-left","-50%"),a.style("text-align","center")),i.selectAll(".data-js-timeline").style(n,o+10+"px"),i.selectAll("."+r).style(t,l+"px");var o=(void 0===M.category?i:i.selectAll(".data-js-timeline")).selectAll("."+gr).data(function(e){return void 0===M.category?e:e.entries}),r=c.reduce(function(t,e){return(void 0===M.category?e:e.entries).map(function(e){return t.push(e.key)}),t},[]),r=void 0!==b?b.map(N):function(e,t){var n,r,i,a=e.length,o=-1;if(null==t){for(;++o<a;)if(null!=(n=e[o])&&n<=n)for(r=i=n;++o<a;)null!=(n=e[o])&&(n<r&&(r=n),i<n&&(i=n))}else for(;++o<a;)if(null!=(n=t(e[o],o,e))&&n<=n)for(r=i=n;++o<a;)null!=(n=t(e[o],o,e))&&(n<r&&(r=n),i<n&&(i=n));return[r,i]}(r,function(e){return N(e)}),s=cr(yt,mt,bt,dt,st,lt,ft,ct,Ut).domain([new Date(2e3,0,1),new Date(2e3,0,2)]).rangeRound([0,l]).domain(r),r=o.enter().append("div").attr("class",gr);o.exit().remove(),r.append("div").attr("class","milestones__group__bullet");r=r.merge(o).style(n,function(e){return s(N(e.key))+"px"});g?(o=(n=(o=r.selectAll("."+pr+"-"+x).data(function(e){return[e]})).enter().append("div").attr("class",pr+"-"+x).merge(o).classed(yr+"-"+x,function(e){return Mr(e.index,v)}).selectAll("."+vr+"-"+x).data(function(e){return[e]})).enter().append("div").attr("class",vr+"-"+x).merge(n).style(t,function(e){var t,n=s(N(e.key)),r=e.index+1,i="top-bottom"===v?2:1,i=void 0===M.category?(a=c[e.timelineIndex][e.index+i],t=c[e.timelineIndex][e.index-i],c[e.timelineIndex].length):(a=c[e.timelineIndex].entries[e.index+i],t=c[e.timelineIndex].entries[e.index-i],c[e.timelineIndex].entries.length),e="horizontal"===x?a:t,a="horizontal"===x?t:a;void 0!==e?(o=s(N(e.key)),o="horizontal"===x?o-n:n-o,i-r==2&&(o/=2)):i-r==1?o="horizontal"===x?l-n:n:i-r==0&&(o=void 0!==a?(a=s(N(a.key)),"horizontal"===x?(l-a)/2:a/2):l);var o=Math.max(0,o-6);return Math.min("horizontal"===x?u:o,o)+"px"}).each(function(e){var t=Mr(e.index,v),n=z(this);n.html(null);var r=n.append("div").classed("wrapper",!0);t&&"vertical"!==x||(r.append("span").classed(wr,!0).text(h(N(e.key))),r.append("br")),e.values.map(function(e,t){0<t&&r.append("br");t=e[M.text],t=-1<["jpg","jpeg","gif","png"].indexOf(t.split(".").pop())?r.append("img").classed("milestones-label",!0).classed("milestones-image-label",!0).attr("height","100").attr("src",t):r.append("span").classed("milestones-label",!0).classed("milestones-text-label",!0).text(t);t.datum({text:e[M.text],timestamp:e[M.timestamp],attributes:e}),"function"!=typeof y&&"function"!=typeof m&&"function"!=typeof p||t.classed(xr,!0),"function"==typeof y&&t.on("click",A),"function"==typeof m&&t.on("mouseleave",D),"function"==typeof p&&t.on("mouseover",T)}),t&&"horizontal"===x&&(r.append("br"),r.append("span").classed(wr,!0).text(h(N(e.key))))}),(o=n.merge(o)).style("padding-top","0px").style("padding-bottom","0px"),w&&Nr(N,v,u,M,c,x,o,l,t,s)):r.selectAll("."+pr+"-"+x).remove(),i.each(function(e,t,n){var r=V(z(n[t]).selectAll("* ."+yr+"-"+x)._groups[0],function(e){return e.offsetHeight}),i=V(z(n[t]).selectAll("* :not(."+yr+"-"+x+")")._groups[0],function(e){return e.offsetHeight});"horizontal"===x?z(n[t]).style("margin-top",10+(r||0)+"px").style("height",10+(i||0)+"px"):(i=void 0!==M.category?Math.round(100/(c.length+1))*(t+1):"50",z(n[t]).style("margin-top","50px").style("margin-left",i+"%").style("position","absolute"))})}return window.addEventListener("resize",function(){return window.requestAnimationFrame(function(){return n()})}),dr({aggregateBy:function(e){C=kr(sr[e]),N=Ur(sr[e]),t(sr[e])},mapping:function(e){M=Object.assign(M,e)},optimize:function(e){w=e},orientation:function(e){x=e,z(d).html("")},distribution:function(e){v=e},parseTime:function(e){_=Ur(e)},labelFormat:t,useLabels:e,range:function(e){Array.isArray(e)&&2==e.length&&(b=e)},render:n,onEventClick:function(e){y=e},onEventMouseLeave:function(e){m=e},onEventMouseOver:function(e){p=e}})}});